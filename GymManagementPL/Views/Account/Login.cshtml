 @model LoginViewModel
@{
	ViewData["Title"] = "Admin Login - Route Fitness";
	Layout = null;
}

<!DOCTYPE html>
<html lang="en" data-bs-theme="light">
<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<title>Gym Management System - Login</title>

	<link href="~/favicon0.ico" rel="icon" />

	<!-- Bootstrap CSS -->
	<link href="~/css/bootstrap.min.css" rel="stylesheet">

	<!-- Icons -->
	<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet" />

	<style>

		body {
			font-family: 'Segoe UI', sans-serif;
			transition: background-color 0.3s, color 0.3s;
		}

		.login-wrapper {
			min-height: 100vh;
		}

		.dark-mode .card {
			background-color: #192633 !important;
			color: #f8f9fa !important;
		}

		.dark-mode body {
			background-color: #101922 !important;
			color: #f8f9fa !important;
		}

		.dark-mode input,
		.dark-mode .form-control {
			background-color: #18222f;
			border-color: #2d3b4f;
			color: #fff;
		}

		.toggle-btn {
			position: absolute;
			top: 20px;
			right: 20px;
			z-index: 100;
		}

		.btn-login {
			color: white;
			border: none;
			border-radius: 10px;
			padding: 15px;
			font-size: 16px;
			font-weight: 600;
			width: 100%;
			transition: all 0.3s ease;
			text-transform: uppercase;
			letter-spacing: 1px;
			margin-top: 10px;
		}

			.btn-login:hover {
				transform: translateY(-2px);
				box-shadow: 0 5px 20px rgba(10, 17, 114, 0.4);
				color: white;
			}
	</style>
</head>
<body>
	<!-- Theme Toggle -->
	<div class="toggle-btn">
		<button id="theme-toggle" class="btn btn-outline-secondary d-flex align-items-center gap-2">
			<span id="theme-icon" class="material-symbols-outlined">dark_mode</span>
		</button>
	</div>

	<div class="container-md login-wrapper d-flex align-items-center">
		<div class="col-12 col-lg-6 m-auto">
			<!-- Login Form -->
			<div class="d-flex align-items-center justify-content-center">
				<div class="card rounded-5 shadow-lg p-4 w-100 mt-5 mt-sm-0 mb-3">
					<div class="text-center mb-4 d-flex align-items-center gap-3 border-bottom">
						<div class="d-inline-flex align-items-center justify-content-center bg-primary rounded-3 p-3 mb-2">
							<span class="material-symbols-outlined text-white" style="font-size: 32px;">fitness_center</span>
						</div>
						<h2 class="fw-bold">Power Fitness</h2>
					</div>

					<div class="text-center mb-4">
						<h3 class="fw-bold">Welcome Back</h3>
						<p class="text-muted mb-0">Please enter your details to sign in.</p>
					</div>

					@Html.ValidationMessage("InvalidLogin", new { @class = "text-danger" })
					<form asp-action="Login" asp-controller="Account" method="post" id="loginForm">
						<div class="mb-3">
							<label asp-for="Email" class="form-label fw-semibold d-flex gap-1">
								<span class="material-symbols-outlined">
									mail
								</span> 
								Email Address
							</label>
							<input asp-for="Email" class="form-control" id="Email" name="Email" placeholder="Enter your email address">
							<span asp-validation-for="Email" class="text-danger small"></span>
						</div>

						<div class="mb-3">
							<label asp-for="Password" class="form-label fw-semibold d-flex gap-1">
								<span class="material-symbols-outlined">
									password
								</span> 
								Password
								</label>
							<div class="input-group w-100">
								<input asp-for="Password" type="password" class="form-control" id="Password" name="Password" placeholder="Enter your password">
								<button class="btn btn-outline-secondary d-flex align-items-center" type="button" id="togglePassword">
									<span class="material-symbols-outlined">visibility</span>
								</button>
							</div>
							<span asp-validation-for="Password" class="text-danger small"></span>
						</div>

						<div class="form-check">
							<input asp-for="RememberMe" class="form-check-input" type="checkbox" id="rememberMe">
							<label class="form-check-label" for="rememberMe">
								Remember me
							</label>
						</div>

						<button type="submit" class="btn btn-primary btn-login d-flex justify-content-center gap-2" id="loginBtn">
							<span class="material-symbols-outlined">
								login
							</span>
							Login to Dashboard
						</button>
					</form>

					<div class="text-center mt-4">
						<p class="text-secondary small mb-0">© 2025 Power Fitness. All rights reserved.</p>
					</div>
				</div>
			</div>
		</div>
	</div>

	<!-- Bootstrap & JS -->
	<script src="~/js/bootstrap.bundle.min.js"></script>
	<script src="~/lib/jquery-validation/dist/jquery.validate.min.js"></script>
	<script src="~/lib/jquery-validation-unobtrusive/dist/jquery.validate.unobtrusive.min.js"></script>

	<script>
		// Password visibility toggle
		const togglePassword = document.getElementById('togglePassword');
		const passwordInput = document.getElementById('Password');
		togglePassword.addEventListener('click', () => {
			const type = passwordInput.type === 'password' ? 'text' : 'password';
			passwordInput.type = type;
			togglePassword.querySelector('span').textContent = type === 'password' ? 'visibility' : 'visibility_off';
		});

		// Dark Mode toggle
		const toggle = document.getElementById('theme-toggle');
		const icon = document.getElementById('theme-icon');
		const html = document.documentElement;

		// Apply saved theme or system preference
		const savedTheme = localStorage.getItem('theme');
		if (savedTheme) {
			html.setAttribute('data-bs-theme', savedTheme);
			document.body.classList.toggle('dark-mode', savedTheme === 'dark');
			icon.textContent = savedTheme === 'dark' ? 'light_mode' : 'dark_mode';
		} else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
			html.setAttribute('data-bs-theme', 'dark');
			document.body.classList.add('dark-mode');
			icon.textContent = 'light_mode';
		}

		// Toggle theme
		toggle.addEventListener('click', () => {
			const current = html.getAttribute('data-bs-theme') === 'dark' ? 'light' : 'dark';
			html.setAttribute('data-bs-theme', current);
			localStorage.setItem('theme', current);
			document.body.classList.toggle('dark-mode', current === 'dark');
			icon.textContent = current === 'dark' ? 'light_mode' : 'dark_mode';
		});
	</script>
</body>
</html>